<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inventaire — v12.3.4-fix</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Inventaire — v12.3.4</h1>
    <div class="toolbar">
      <!-- Auth sur 3 lignes -->
      <div id="auth-area" class="auth">
        <form id="auth-form" class="auth-form-3rows" autocomplete="off">
          <div class="auth-row"><input type="email" id="auth-email" placeholder="email@exemple.fr" required /></div>
          <div class="auth-row"><input type="password" id="auth-password" placeholder="Mot de passe" required /></div>
          <div class="auth-row"><button type="submit" id="btn-login">Se connecter</button></div>
        </form>
        <div id="auth-info" class="auth-info" hidden>
          <span id="auth-user"></span>
          <button id="btn-logout" class="secondary">Se déconnecter</button>
        </div>
      </div>

      <!-- Palette en ligne, autres boutons en dessous -->
      <div class="palette-inline">
        <label for="palette-code">Numéro palette</label>
        <input type="text" id="palette-code" placeholder="Ex: PAL-2025-000123" />
        <button id="btn-load-palette">Charger</button>
      </div>

      <div class="toolbar-row actions">
        <button id="add-row">+ Ligne</button>
        <button id="save">Sauvegarder</button>
        <button id="export-csv">Exporter CSV</button>
        <button id="print">Imprimer</button>
        <span class="status" id="status"></span>
        <span class="lock-status" id="lock-status"></span>
      </div>
    
      <div class="palette-location">
        <label for="palette-location">Localisation</label>
        <input type="text" id="palette-location" placeholder="Ex: Zone A / Allée 3 / Rack B2" />
      </div>

    </div>

      <div class="palette-photos-block" id="palette-photos-block">
        <div class="palette-photos-header">
          <div class="palette-photos-title">Photo de la palette</div>
          <button id="btn-take-photo" type="button">Prendre une photo</button>
<input type="file" id="palette-photo-input" accept="image/jpeg,image/png,image/webp" capture="environment" style="display:none" />
          <input id="photo-input" type="file" accept="image/*" capture="environment" hidden />
        </div>
        <div id="palette-photos" class="palette-photos"></div>
<div class="photo-hint">Formats supportés : JPG / PNG / WEBP — compression automatique</div>
      </div>


  </header>

  <main>
    <table id="inventory-table">
      <thead>
        <tr>
          <th class="sticky" colspan="2">Désignation</th>
        </tr>
      </thead>
      <tbody id="table-body"></tbody>
    </table>
  </main>

  <template id="row-template">
    <tr>
      <td class="col-designation">
        <input type="text" class="designation" placeholder="Désignation" />
      </td>
      <td class="col-qty">
        <div class="qty-wrap">
          <input type="number" class="qty" min="0" step="1" inputmode="numeric" placeholder="0000" />
          <div class="qty-buttons">
            <button type="button" class="qty-btn qty-plus" aria-label="Augmenter">+</button>
            <button type="button" class="qty-btn qty-minus" aria-label="Diminuer">−</button>
          </div>
        </div>
      </td>
    </tr>
  </template>

  <footer>
    <p>Inventaire — v12.3.4-fix • Données Supabase</p>
  </footer>

  <script type="module" src="app.js"></script>
</body>
</html>
