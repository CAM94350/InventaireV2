:root { --bg:#f7f7f7; --border:#c9c9c9; --text:#222; --primary:#0067c0; --primary-dark:#00539b; }
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:var(--bg)}
header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);padding:.5rem .75rem;z-index:10}
h1{margin:0 0 .35rem 0;font-size:1.1rem}

.toolbar{display:flex;flex-direction:column;gap:.5rem}
button{background:var(--primary);color:#fff;border:none;padding:.3rem .55rem;border-radius:.2rem;cursor:pointer;font-weight:600;font-size:14px}
button:hover{filter:brightness(1.05)}
button.secondary{background:#555}
.status{margin-left:auto;font-size:.85rem;color:#555}

/* Auth sur 3 lignes */
.auth-form-3rows{display:flex;flex-direction:column;gap:.35rem}
.auth-row{display:flex}
.auth-row input{width:100%;padding:.35rem .45rem;border:1px solid var(--border);border-radius:.25rem}
.auth-row button{width:100%;padding:.4rem .55rem}
.auth-info{display:flex;align-items:center;gap:.5rem}
#auth-user{font-weight:600}

/* Palette inline */
.palette-inline{display:flex;align-items:center;gap:.35rem}
.palette-inline input{padding:.35rem .45rem;border:1px solid var(--border);border-radius:.25rem;min-width:220px}
.palette-inline button{padding:.35rem .55rem}

/* Actions sous la palette */
.actions{display:flex;flex-wrap:wrap;gap:.35rem;align-items:center}

main{padding:.75rem}

/* Tableau compact */
table{width:100%;border-collapse:collapse;background:#fff;font-size:14px}
thead th{position:sticky;top:72px;background:#fff;z-index:5;text-align:left}
th,td{border:1px solid var(--border);padding:4px 6px;line-height:1.1;vertical-align:middle}
tr:nth-child(even){background:#fafafa}

/* Colonnes */
.col-designation{width:72%}
.col-qty{width:28%}

/* Inputs */
td input[type="text"], td input[type="number"]{width:100%;border:1px solid var(--border);border-radius:3px;padding:3px 6px;height:30px;line-height:1.2;font-size:14px}

/* Quantité : input à gauche, boutons regroupés à droite ; largeur pour 4 chiffres */
.qty-wrap{display:flex;align-items:center;gap:.5rem}
.qty{width:110px}
.qty-buttons{margin-left:auto;display:inline-flex;gap:.25rem}
.qty-btn{background:var(--primary);color:#fff;border:none;border-radius:6px;width:32px;height:30px;display:inline-flex;align-items:center;justify-content:center;font-weight:700}
.qty-btn:active{background:var(--primary-dark)}

/* Sécurité d'affichage si authentifié */
body.is-authenticated #auth-form { display: none !important; }
body.is-authenticated #auth-info { display: flex !important; }



/* Localisation palette */
.palette-location{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}
.palette-location label{font-weight:600}
.palette-location input{
  flex:1 1 320px;
  min-width:220px;
  padding:.35rem .45rem;
  border:1px solid var(--border);
  border-radius:.25rem;
  height:30px;
  line-height:1.2;
  font-size:14px;
}

/* Mobile */
@media (max-width: 640px){
  .palette-inline input{min-width:160px}
  .palette-inline input{height:36px;font-size:16px}
  .palette-location input{min-width:160px}
  .palette-location input{height:36px;font-size:16px}
  .status{order:2;width:100%;margin-left:0}

  #inventory-table tbody tr{display:flex;align-items:center;gap:.6rem}
  .col-designation{flex:1; min-width:0}
  .col-qty{flex:0 0 auto; min-width:170px}
  .qty{height:36px;font-size:16px;width:84px}
  .qty-btn{width:36px;height:36px;border-radius:8px;font-size:18px}
}

/* ===========================
   v11.0 – Locks & photos
   =========================== */
.lock-status{
  margin-left: 10px;
  font-weight: 600;
}
.lock-status.locked{ color: #b00020; }
.lock-status.owned{ color: #1b5e20; }

.palette-photos{
  margin: 10px 0 12px 0;
  padding: 10px;
  border: 1px solid rgba(0,0,0,.12);
  border-radius: 10px;
  background: rgba(0,0,0,.02);
}
.photos-head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
}
.photos-title{ font-weight: 600; }
.photo-list{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
.photo-thumb{
  width: 96px;
  height: 96px;
  border-radius: 10px;
  object-fit: cover;
  border: 1px solid rgba(0,0,0,.15);
  background: rgba(0,0,0,.04);
}

@media (max-width: 640px){
  /* Force localisation to single-line height, same as palette number */
  #palette-location{
    height: 44px !important;
    min-height: 44px !important;
    max-height: 44px !important;
    line-height: 44px !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    box-sizing: border-box;
  }
  .palette-photos{ padding: 10px; }
  .photo-thumb{ width: 88px; height: 88px; }
}
